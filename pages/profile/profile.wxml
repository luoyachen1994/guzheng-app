<!--pages/profile/profile.wxml-->
<view class="container safe-bottom">
  <!-- ç”¨æˆ·ä¿¡æ¯ -->
  <view class="profile-header">
    <view class="avatar-wrapper">
      <image
        class="avatar"
        src="{{userInfo.avatarUrl || '/static/images/default-avatar.png'}}"
        mode="aspectFill"
      ></image>
    </view>
    <text class="nickname">{{userInfo.nickName || 'ç‚¹å‡»ç™»å½•'}}</text>
    <text class="user-level">{{levelText}}</text>
    <button wx:if="{{!isLoggedIn}}" class="btn-primary login-btn" bindtap="handleLogin">
      å¾®ä¿¡ç™»å½•
    </button>
  </view>

  <!-- ç»ƒä¹ æ•°æ®æ¦‚è§ˆ -->
  <view class="card stats-overview">
    <view class="stats-grid">
      <view class="overview-item" bindtap="goToHistory">
        <text class="overview-num">{{stats.totalHours}}</text>
        <text class="overview-label">æ€»ç»ƒä¹ (å°æ—¶)</text>
      </view>
      <view class="overview-item">
        <text class="overview-num">{{stats.totalDays}}</text>
        <text class="overview-label">ç»ƒä¹ å¤©æ•°</text>
      </view>
      <view class="overview-item">
        <text class="overview-num">{{stats.avgScore}}</text>
        <text class="overview-label">å¹³å‡åˆ†</text>
      </view>
      <view class="overview-item">
        <text class="overview-num">{{stats.bestScore}}</text>
        <text class="overview-label">æœ€é«˜åˆ†</text>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½åˆ—è¡¨ -->
  <view class="card menu-card">
    <view class="menu-item" bindtap="goToHistory">
      <text class="menu-icon">ğŸ“‹</text>
      <text class="menu-text">ç»ƒä¹ è®°å½•</text>
      <text class="menu-arrow">â€º</text>
    </view>
    <view class="menu-divider"></view>

    <view class="menu-item" bindtap="goToProgress">
      <text class="menu-icon">ğŸ“ˆ</text>
      <text class="menu-text">è¿›åº¦ç»Ÿè®¡</text>
      <text class="menu-arrow">â€º</text>
    </view>
    <view class="menu-divider"></view>

    <view class="menu-item" bindtap="goToCollection">
      <text class="menu-icon">â­</text>
      <text class="menu-text">æ”¶è—æ›²ç›®</text>
      <text class="menu-arrow">â€º</text>
    </view>
    <view class="menu-divider"></view>

    <view class="menu-item" bindtap="goToGoals">
      <text class="menu-icon">ğŸ¯</text>
      <text class="menu-text">ç»ƒä¹ ç›®æ ‡</text>
      <text class="menu-arrow">â€º</text>
    </view>
  </view>

  <view class="card menu-card">
    <view class="menu-item" bindtap="goToSettings">
      <text class="menu-icon">âš™ï¸</text>
      <text class="menu-text">è®¾ç½®</text>
      <text class="menu-arrow">â€º</text>
    </view>
    <view class="menu-divider"></view>

    <view class="menu-item" bindtap="goToAbout">
      <text class="menu-icon">â„¹ï¸</text>
      <text class="menu-text">å…³äº</text>
      <text class="menu-arrow">â€º</text>
    </view>
    <view class="menu-divider"></view>

    <view class="menu-item" bindtap="goToFeedback">
      <text class="menu-icon">ğŸ’¬</text>
      <text class="menu-text">æ„è§åé¦ˆ</text>
      <text class="menu-arrow">â€º</text>
    </view>
  </view>
</view>
